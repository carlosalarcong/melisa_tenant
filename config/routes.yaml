# Rutas de autenticación
app_login:
    path: /login
    controller: App\Controller\LoginController::login
    methods: [GET, POST]

app_logout:
    path: /logout
    controller: App\Controller\LoginController::logout
    methods: [GET]

# API para obtener empresas disponibles
app_empresas_disponibles:
    path: /api/empresas-disponibles
    controller: App\Controller\LoginController::getEmpresasDisponibles
    methods: [GET]

# API de Pacientes para Stimulus
api_patients_get:
    path: /api/patients/{id}
    controller: App\Controller\Api\PatientApiController::getPatient
    requirements:
        id: '\d+'
    methods: [GET]

api_patients_search:
    path: /api/patients/search
    controller: App\Controller\Api\PatientApiController::searchPatients
    methods: [GET]

api_patients_update:
    path: /api/patients/{id}
    controller: App\Controller\Api\PatientApiController::updatePatient
    requirements:
        id: '\d+'
    methods: [PUT, PATCH]

# Página de demostración API Platform + Stimulus
# Examples - Demos para desarrollo y aprendizaje
examples_index:
    path: /examples
    controller: App\Controller\DefaultController::renderTemplate
    defaults:
        template: 'examples/index.html.twig'

examples_api_platform:
    path: /examples/api-platform
    controller: App\Controller\DefaultController::renderTemplate
    defaults:
        template: 'examples/api_platform_demo.html.twig'

examples_internal_controllers:
    path: /examples/internal-controllers
    controller: App\Controller\DefaultController::renderTemplate
    defaults:
        template: 'examples/internal_controllers_demo.html.twig'
    methods: [GET]

# Rutas de recuperación de contraseña
app_forgot_password:
    path: /forgot-password
    controller: App\Controller\PasswordResetController::forgotPassword
    methods: [GET, POST]

app_reset_password:
    path: /reset-password/{token}
    controller: App\Controller\PasswordResetController::resetPassword
    requirements:
        token: '[a-f0-9]{64}'
    methods: [GET, POST]

# Rutas de idiomas/localización
app_locale_change:
    path: /locale/change/{locale}
    controller: App\Controller\LocaleController::changeLocale
    requirements:
        locale: 'es|en'
    methods: [GET, POST]

app_locale_available:
    path: /api/locale/available
    controller: App\Controller\LocaleController::getAvailableLocales
    methods: [GET]

app_locale_translations:
    path: /api/locale/translations/{domain}
    controller: App\Controller\LocaleController::getTranslations
    defaults:
        domain: 'messages'
    methods: [GET]

# Ruta principal del sistema
app_root:
    path: /
    controller: App\Controller\DefaultController::index
    methods: [GET]

# Rutas dinámicas para controladores específicos
app_dynamic:
    path: /{controller}/{action}
    controller: App\Controller\DefaultController::handleDynamicRequest
    requirements:
        controller: '[a-zA-Z0-9_-]+'
        action: '[a-zA-Z0-9_-]+'
    defaults:
        action: 'index'
    methods: [GET, POST]

# Ruta específica para dashboard sin action
app_dashboard:
    path: /{controller}
    controller: App\Controller\DefaultController::handleDynamicRequest
    requirements:
        controller: '[a-zA-Z0-9_-]+'
    defaults:
        action: 'index'
    methods: [GET, POST]
