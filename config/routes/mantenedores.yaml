# Rutas dinámicas para mantenedores multi-tenant
# Se resuelven automáticamente según el subdominio

# ==================================
# MANTENEDORES - PÁGINA PRINCIPAL
# ==================================

# Ruta principal de mantenedores
mantenedores_index:
    path: /mantenedores
    controller: App\Controller\Mantenedores\MantenedoresController::index
    methods: [GET]

# Ruta para la sección básicos
mantenedores_basico_index:
    path: /mantenedores/basico
    controller: App\Controller\Mantenedores\MantenedoresController::basico
    methods: [GET]

# ==================================
# MANTENEDORES BÁSICOS - PAÍS
# ==================================

# Rutas por defecto para País (todos los tenants)
mantenedores_pais_index:
    path: /mantenedores/basico/pais
    controller: App\Controller\Mantenedores\Basico\PaisController::index
    methods: [GET]

mantenedores_pais_content:
    path: /mantenedores/basico/pais/content
    controller: App\Controller\Mantenedores\Basico\PaisController::content
    methods: [GET]

mantenedores_pais_list:
    path: /mantenedores/basico/pais/list
    controller: App\Controller\Mantenedores\Basico\PaisController::list
    methods: [GET]

mantenedores_pais_show:
    path: /mantenedores/basico/pais/{id}
    controller: App\Controller\Mantenedores\Basico\PaisController::show
    requirements:
        id: '\d+'
    methods: [GET]

mantenedores_pais_create:
    path: /mantenedores/basico/pais
    controller: App\Controller\Mantenedores\Basico\PaisController::create
    methods: [POST]

mantenedores_pais_update:
    path: /mantenedores/basico/pais/{id}
    controller: App\Controller\Mantenedores\Basico\PaisController::update
    requirements:
        id: '\d+'
    methods: [PUT, PATCH]

mantenedores_pais_delete:
    path: /mantenedores/basico/pais/{id}
    controller: App\Controller\Mantenedores\Basico\PaisController::delete
    requirements:
        id: '\d+'
    methods: [DELETE]

# ==================================
# MANTENEDORES BÁSICOS - RELIGIÓN
# ==================================

# Rutas por defecto para Religión (todos los tenants)
mantenedores_religion_index:
    path: /mantenedores/basico/religion
    controller: App\Controller\Mantenedores\Basico\ReligionController::index
    methods: [GET]

mantenedores_religion_list:
    path: /mantenedores/basico/religion/list
    controller: App\Controller\Mantenedores\Basico\ReligionController::list
    methods: [GET]

mantenedores_religion_show:
    path: /mantenedores/basico/religion/{id}
    controller: App\Controller\Mantenedores\Basico\ReligionController::show
    requirements:
        id: '\d+'
    methods: [GET]

mantenedores_religion_create:
    path: /mantenedores/basico/religion
    controller: App\Controller\Mantenedores\Basico\ReligionController::create
    methods: [POST]

mantenedores_religion_update:
    path: /mantenedores/basico/religion/{id}
    controller: App\Controller\Mantenedores\Basico\ReligionController::update
    requirements:
        id: '\d+'
    methods: [PUT, PATCH]

mantenedores_religion_delete:
    path: /mantenedores/basico/religion/{id}
    controller: App\Controller\Mantenedores\Basico\ReligionController::delete
    requirements:
        id: '\d+'
    methods: [DELETE]

# ==================================
# MANTENEDORES BÁSICOS - SEXO (actualizadas para usar controlador directo)
# ==================================

# Rutas por defecto para Sexo (todos los tenants)
mantenedores_sexo_index:
    path: /mantenedores/basico/sexo
    controller: App\Controller\Mantenedores\Basico\SexoController::index
    methods: [GET]

mantenedores_sexo_list:
    path: /mantenedores/basico/sexo/list
    controller: App\Controller\Mantenedores\Basico\SexoController::list
    methods: [GET]

mantenedores_sexo_show:
    path: /mantenedores/basico/sexo/{id}
    controller: App\Controller\Mantenedores\Basico\SexoController::show
    requirements:
        id: '\d+'
    methods: [GET]

mantenedores_sexo_create:
    path: /mantenedores/basico/sexo
    controller: App\Controller\Mantenedores\Basico\SexoController::create
    methods: [POST]

mantenedores_sexo_update:
    path: /mantenedores/basico/sexo/{id}
    controller: App\Controller\Mantenedores\Basico\SexoController::update
    requirements:
        id: '\d+'
    methods: [PUT, PATCH]

mantenedores_sexo_delete:
    path: /mantenedores/basico/sexo/{id}
    controller: App\Controller\Mantenedores\Basico\SexoController::delete
    requirements:
        id: '\d+'
    methods: [DELETE]

# ==================================
# MANTENEDORES BÁSICOS - REGIÓN
# ==================================

# Rutas por defecto para Región
mantenedores_region_index:
    path: /mantenedores/basico/region
    controller: App\Controller\Mantenedores\Basico\RegionController::index
    methods: [GET]

mantenedores_region_list:
    path: /mantenedores/basico/region/list
    controller: App\Controller\Mantenedores\Basico\RegionController::list
    methods: [GET]

mantenedores_region_show:
    path: /mantenedores/basico/region/{id}
    controller: App\Controller\Mantenedores\Basico\RegionController::show
    requirements:
        id: '\d+'
    methods: [GET]

mantenedores_region_create:
    path: /mantenedores/basico/region
    controller: App\Controller\Mantenedores\Basico\RegionController::create
    methods: [POST]

mantenedores_region_update:
    path: /mantenedores/basico/region/{id}
    controller: App\Controller\Mantenedores\Basico\RegionController::update
    requirements:
        id: '\d+'
    methods: [PUT, PATCH]

mantenedores_region_delete:
    path: /mantenedores/basico/region/{id}
    controller: App\Controller\Mantenedores\Basico\RegionController::delete
    requirements:
        id: '\d+'
    methods: [DELETE]

# Rutas adicionales para regiones por país
mantenedores_region_por_pais:
    path: /mantenedores/basico/region/por-pais/{pais}
    controller: App\Controller\Mantenedores\Basico\RegionController::regionesPorPais
    methods: [GET]

# Rutas específicas para Melisawiclinic (Región con IoT)
mantenedores_region_metricas_iot:
    path: /mantenedores/basico/region/metricas-iot
    controller: App\Service\DynamicControllerResolver::resolve
    defaults:
        _controller_pattern: 'App\Controller\Mantenedores\Basico\Region\{tenant}\RegionController::metricasIoT'
        _tenant_specific: ['Melisawiclinic']
    methods: [GET]

mantenedores_region_configurar_iot:
    path: /mantenedores/basico/region/{id}/configurar-iot
    controller: App\Service\DynamicControllerResolver::resolve
    defaults:
        _controller_pattern: 'App\Controller\Mantenedores\Basico\Region\{tenant}\RegionController::configurarIoT'
        _tenant_specific: ['Melisawiclinic']
    requirements:
        id: '\d+'
    methods: [POST]

mantenedores_region_dashboard_tiempo_real:
    path: /mantenedores/basico/region/dashboard-tiempo-real
    controller: App\Service\DynamicControllerResolver::resolve
    defaults:
        _controller_pattern: 'App\Controller\Mantenedores\Basico\Region\{tenant}\RegionController::dashboardTiempoReal'
        _tenant_specific: ['Melisawiclinic']
    methods: [GET]

# ==================================
# RUTAS FUTURAS PARA EXTENSIÓN
# ==================================

# Plantilla para futuros mantenedores básicos
# mantenedores_[entidad]_[accion]:
#     path: /mantenedores/basico/[entidad]/[accion]
#     controller: App\Service\DynamicControllerResolver::resolve
#     defaults:
#         _controller_pattern: 'App\Controller\Mantenedores\Basico\[Entidad]\{tenant}\[Entidad]Controller::[accion]'
#         _fallback_controller: 'App\Controller\Mantenedores\Basico\[Entidad]\Default\[Entidad]Controller::[accion]'

# ==================================
# NOTAS DE CONFIGURACIÓN
# ==================================

# Patrones de resolución dinámica:
# - {tenant} se reemplaza automáticamente por el subdominio actual (Melisalacolina, Melisawiclinic, etc.)
# - _fallback_controller se usa cuando no existe el controller específico del tenant
# - _tenant_specific define para qué tenants está disponible una ruta específica
# - Las rutas se evalúan en orden, las más específicas primero

# Ejemplo de resolución:
# 1. Usuario en melisalacolina.localhost:8081 accede a /mantenedores/basico/sexo
# 2. Se intenta: App\Controller\Mantenedores\Basico\Sexo\Melisalacolina\SexoController::index
# 3. Si no existe, fallback: App\Controller\Mantenedores\Basico\Sexo\Default\SexoController::index

# Configuración de subdominios soportados:
# - Default: Fallback para cualquier subdominio no específico
# - Melisalacolina: Clínica La Colina (funcionalidades específicas)  
# - Melisawiclinic: Wi Clinic Technology (funcionalidades IoT)
# - Melisahospital: Hospital Central (funcionalidades hospitalarias)