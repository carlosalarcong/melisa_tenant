<style>
	body .modal {
		width: 98%;
		left: 1%;
		height: 90%;
		margin-right: auto;
		margin-left: 0%;
	}
	body .modal-body{

		padding: 1px;
		max-height: 92%;
		height: 92%;
	}

	body .modal.fade.in {
		top: 5%;
		bottom: 5%;
	}
</style>
<div class="table-header header-color-blue " style="text-align:left;">
	<span class="white"><b>INFORME DE CAJA:</b></span>
</div>
<div class="table-header-grey" style="text-align:left;">
	<i class="icon-user text-left space"> </i> Información Cajero
</div>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="table table-bordered table-condensed  grey">
	<tr >
		<th width="6%" style=" background-color: whitesmoke ">Rut:</th>
		<td width="14%">
			<span >{{ cajero.rut }}-{{ cajero.dv }}</span>
		</td>
		<th width="10%" style=" background-color: whitesmoke ">Nombre:</th>
		<td width="25%">
			<span  >{{ cajero.nombreUser }}</span>
		</td>
		<th  width="10%" style=" background-color: whitesmoke ">Apellidos:</th>
		<td width="35%">
			{{ cajero.apellidoP }} {{ cajero.apellidoM }}
		</td>
	</tr>
</table>
<div class="table-header-grey" style="text-align:left;">
	<i class="icon-dollar text-left space"> </i> Pagos
</div>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="table table-bordered table-condensed  grey zoom-pagos" id="informe">
	<tr >
		<th colspan="9" width="47%" style=" background-color: cornsilk; font-size: larger ">Pagos:</th>
		<th colspan="7" width="47%" style=" background-color: azure; font-size: larger  ">Detalle Copagos y Particulares:</th>
		<th width="6%"></th>
	</tr>
	<tr style=" background-color: #f5f5f5">
		<th> Rut P. </th>
		<th> Paciente </th>
		<th> Monto </th>
		<th> F.Pago </th>
		<th> Financiador </th>
		<th> N° Bono </th>
		<th> Bonif. </th>
		<th> Seguro </th>
		<th> Copago </th>
		<th> Boleta </th>
		<th> N° Doc </th>
		<th> Efectivo </th>
		<th> Cheque </th>
		<th> T. Crédito </th>
		<th> T. Débito </th>
		<th> Gratuidad </th>
		<th> Profesional </th>
	</tr>
	<tbody>
		{% set sumaTotal = 0 %}
		{% set sumaBonificacion = 0 %}
		{% set sumaSeguro = 0 %}
		{% set sumaCopago = 0 %}
		{% for c in caja %}
		{# FIN PAGOS #}
		<tr>
			<td>
				{{ c.rut }}-{{ c.dv }}
			</td>
			<td>
				{{ c.apellidoP }} {{ c.nombre[1] ~ '...' }}
				<span>.</span>
			</td>
			<td>
				{{ obtenerMonto(c.monto) }}
			</td>
			<td>
				{% for fp in formaPago %}
				{% if c.idPagoCuenta == fp.idPagoCuenta %}
				{% if fp.nombreForma %}
				{{ fp.nombreForma }} <div class="clearfix"></div>
				{% else %} -
				{% endif %}
				{% endif %}
				{% endfor %}
			</td>
			<td>
				{% if c.convenio %}
				{{ c.convenio }}
				{% else %}
				{{ c.financiador }}
				{% endif %}
			</td>
			<td>
				{% if c.nBono %}
				{% for fp in formaPago %}
				{% if c.idPagoCuenta == fp.idPagoCuenta %}
				{% if (fp.idFormaPago == 3 or fp.idFormaPago == 5) %}
				{{ c.nBono }}
				{% else %} -
				{% endif %}
				{% endif %}
				{% endfor %}
				{% else %} -
				{% endif %}
			</td>
			<td>
				{% if c.nBono %}
				{% for fp in formaPago %}
				{% if c.idPagoCuenta == fp.idPagoCuenta %}
				{% if fp.idFormaPago == 3 %}
				{{ c.bonificacion }}
				{% set sumaBonificacion = sumaBonificacion + c.bonificacion %}
				{% else %} -
				{% endif %}
				{% endif %}
				{% endfor %}
				{% else %} -
				{% endif %}
			</td>
			<td>
				{% if c.nBono %}
				{% for fp in formaPago %}
				{% if c.idPagoCuenta == fp.idPagoCuenta %}
				{% if fp.idFormaPago == 3 %}
				{{ c.seguro }}
				{% set sumaSeguro = sumaSeguro +  c.seguro %}
				{% else %} -
				{% endif %}
				{% endif %}
				{% endfor %}
				{% else %} -
				{% endif %}
			</td>
			<td>
				{% if c.nBono %}
				{% for fp in formaPago %}
				{% if c.idPagoCuenta == fp.idPagoCuenta %}
				{% if fp.idFormaPago == 3 %}
				{{ c.copago }}
				{% set sumaCopago = sumaCopago +  c.copago %}
				{% else %} -
				{% endif %}
				{% endif %}
				{% endfor %}
				{% else %} -
				{% endif %}
			</td>
			{# FIN PAGOS #}
			{# COPAGO Y PARTICULARES #}
			<td>
				{% if c.boleta %}
				{{ c.boleta }}
				{% else %} -
				{% endif %}
			</td>
			<td>
				{% for d in documentos %}
				{% if c.idPagoCuenta == d.idPagoCuenta %}
				{% if d.documento %}
				{{ d.documento }} <div class="clearfix"></div>
				{% else %}-
				{% endif %}
				{% endif %}
				{% endfor %}
			</td>
			<td>
				{% for fp in formaPago %}
				{% if c.idPagoCuenta == fp.idPagoCuenta %}
				{% if fp.idFormaPago == 1 %}
				{{ obtenerMonto(fp.monto) }}
				{% else %} -
				{% endif %}
				{% endif %}
				{% endfor %}
			</td>
			<td>
				{% set montoC = 0 %}
				{% for fp in formaPago %}
				{% if c.idPagoCuenta == fp.idPagoCuenta %}
				{% if fp.idFormaPago == 7 %}
				{% set montoC = montoC + fp.monto %}
				{% endif %}
				{% if fp.idFormaPago == 8 %}
				{% set montoC = montoC + fp.monto %}
				{% endif %}
				{% endif %}
				{% endfor %}
				{% if montoC %}
				{{ obtenerMonto(montoC) }}
				{% else %}-
				{% endif %}
			</td>
			<td>
				{% for fp in formaPago %}
				{% if c.idPagoCuenta == fp.idPagoCuenta %}
				{% if fp.idFormaPago == 4 %}
				{{ obtenerMonto(fp.monto) }}
				{% else %} -
				{% endif %}
				{% endif %}
				{% endfor %}
			</td>
			<td>
				{% for fp in formaPago %}
				{% if c.idPagoCuenta == fp.idPagoCuenta %}
				{% if fp.idFormaPago == 6 %}
				{{ obtenerMonto(fp.monto) }}
				{% else %} -
				{% endif %}
				{% endif %}
				{% endfor %}
			</td>
			<td>
				{% for fp in formaPago %}
				{% if c.idPagoCuenta == fp.idPagoCuenta %}
				{% if fp.idFormaPago == 2 %}
				{{ obtenerMonto(fp.monto) }}
				{% else %} -
				{% endif %}
				{% endif %}
				{% endfor %}
			</td>
			{# FIN COPAGO Y PARTICULARES #}
			{# DIFERENCIA #}
			<td>
				{% if c.esExterno == 0 %}
				{{ c.apellidoPaternoMedico }} {{ c.nombreMedico[1] ~ '...' }}<span>.</span>
				{% else %}
				{{ c.profesionalExterno }}
				{% endif %}
			</td>
			{# FIN DIFERENCIA #}
		</tr>
		{% set sumaTotal = sumaTotal + c.monto %}
		{% endfor %}
		<tr >
			<th colspan="2" style=" background-color: cornsilk; font-size: larger ">Total:</th>
			<th colspan="1" style=" background-color: cornsilk; font-size: larger  ">
				{{ obtenerMonto(sumaTotal) }}
			</th>
			<th colspan ="3" ></th>
			<th colspan="1" style=" background-color: cornsilk; ">
				{{ obtenerMonto(sumaBonificacion) }}
			</th>
			<th colspan="1" style=" background-color: cornsilk; ">
				{{ obtenerMonto(sumaSeguro) }}
			</th>
			<th colspan="1" style=" background-color: cornsilk; ">
				{{ obtenerMonto(sumaCopago) }}
			</th>
			<th colspan="2"></th>
			<th colspan="1" style=" background-color: azure; ">
				{% for m in copagoCount %}
				{% if m.idFormaPago == 1 %}
				{% if m.copagoCount %}
				{{ obtenerMonto(m.copagoCount) }}
				{% else %} -
				{% endif %}
				{% endif %}
				{% endfor %}
			</th>
			<th colspan="1" style=" background-color: azure; ">
				{% set montoCh = 0 %}
				{% for m in copagoCount %}
				{% if m.idFormaPago == 7 %}
				{% set montoCh = montoCh + m.copagoCount %}
				{% endif %}
				{% if m.idFormaPago == 8 %}
				{% set montoCh = montoCh + m.copagoCount %}
				{% endif %}
				{% endfor %}
				{% if montoCh %}
				{{ obtenerMonto(montoCh) }}
				{% else %}-
				{% endif %}
			</th>
			<th colspan="1" style=" background-color: azure; ">
				{% for m in copagoCount %}
				{% if m.idFormaPago == 4 %}
				{% if m.copagoCount %}
				{{ obtenerMonto(m.copagoCount) }}
				{% else %} -
				{% endif %}
				{% endif %}
				{% endfor %}</th>
				<th colspan="1" style=" background-color: azure; ">
					{% for m in copagoCount %}
					{% if m.idFormaPago == 6 %}
					{% if m.copagoCount %}
					{{ obtenerMonto(m.copagoCount) }}
					{% else %} -
					{% endif %}
					{% endif %}{% endfor %}
				</th>
				<th colspan="1" style=" background-color: azure; ">
					{% for m in copagoCount %}
					{% if m.idFormaPago == 2 %}
					{% if m.copagoCount %}
					{{ obtenerMonto(m.copagoCount) }}
					{% else %} -
					{% endif %}
					{% endif %}{% endfor %}</th>
					<th colspan="1">
					</th>
				</tr>
			</tbody>
		</table>
		<br>
		<div class="clearfix"></div>
		<div class="table-header-grey" style="text-align:left;">
			<i class="icon-bar-chart text-left space"></i> Cuadratura Caja
		</div>
		<table align="center" width="100%" class="table table-striped table-condensed table-bordered">
			{#ciclo de medios de pago#}
			{% set auxMedioPago = 0 %}
			{% for dct in detalleCajaTodo %}
			{% set auxMedioPago = auxMedioPago + 1 %}
			{% endfor %}
			{% if auxMedioPago > 1 %}
			<tr>
				<td  colspan="4"  style=" background-color: #DDDDDD">
					<b>Todos los  Medios de Pago</b>
				</td>
			</tr>
			<tr  >
				<td width="25%"  style=" background-color: #FAFAFA">
					<b> Medio de Pago</b>
				</td>
				<td width="25%" style=" background-color: #FAFAFA">
				</td>
				<td width="25%" style=" background-color: #FAFAFA">
					<div style=" text-align:  center">
						<b> Monto</b>
					</div>
				</td>
			</tr>
			{% endif %}
			{% for dct in detalleCajaTodo %}
			{% if dct['monto'] %}
			<tr>
				<td >
					{{ dct['formaPago'] }}
				</td>
				<td>
					<div style=" text-align: center">-
					</div>
				</td>
				<td>
					<div style=" text-align:  right">
						{{ obtenerMonto(dct['monto']) }}
					</div>
				</td>
			</tr>
			{% endif %}
			{% endfor %}
			{#ciclo de medios de pago#}
			{% set auxDepo = 0 %}
			{% for dcd in detalleCajaDeposito %}
			{% if (dcd.idFomaPago != 3  and dcd.idFomaPago != 5) %}
			{% set auxDepo = auxDepo + 1 %}
			{% endif %}
			{% endfor %}
			{% if auxDepo > 1 %}
			<tr  >
				<td  colspan="4"  style=" background-color: #DDDDDD">
					<b>Depositos</b>
				</td>
			</tr>
			<tr>
				<td width="25%"  style=" background-color: #FAFAFA">
					<b> Medio de Pago</b>
				</td>
				<td width="25%" style=" background-color: #FAFAFA">
					<b>N°  Deposito</b>
				</td>
				<td width="25%" style=" background-color: #FAFAFA">
					<div style=" text-align:  center">
						<b> Monto</b>
					</div>
				</td>
			</tr>
			{% endif %}
			{#ciclo de medios de pago Documento#}
			{% for dcd in detalleCajaDeposito %}
			{% if dcd.monto %}
			<tr>
				<td >{{ dcd.formaPago }}
				</td>
				<td >{{ dcd.deposito }}
				</td>
				<td ><div style=" text-align:  right">
					{{ obtenerMonto(dcd.monto) }}
				</td>
			</tr>
			{% endif %}
			{% endfor %}
			{#ciclo de medios de pago Documento#}
			{#ciclo de medios de pago Bono#}
			{% set auxMedioPago = 0 %}
			{% for dc in detalleCaja %}
			{% if (dc['idtipo'] == 3  or dc['idtipo'] == 5) %}
			{% set auxMedioPago = auxMedioPago + 1 %}
			{% endif %}
			{% endfor %}
			{% if auxMedioPago > 1 %}
			<tr  >
				<td  colspan="4"  style=" background-color: #DDDDDD">
					<b>Bonos</b>
				</td>
			</tr>
			<tr  >
				<td width="25%"  style=" background-color: #FAFAFA">
					<b> Medio de Pago</b>
				</td>
				<td width="25%" style=" background-color: #FAFAFA">
					<b> Bono</b>
				</td>
				<td width="25%" style=" background-color: #FAFAFA">
					<div style=" text-align:  center">
						<b> Monto</b>
					</div>
				</td>
			</tr>
			{% endif %}
			{% for dc in detalleCaja %}
			{% if dc['idtipo'] == 5 %}
			{% if dc['monto'] %}
			<tr>
				<td >{{ dc['formaPago'] }}
				</td>
				<td >{{ dc['bono'] }}
				</td>
				<td ><div style=" text-align:  right">
					{{ obtenerMonto(dc['monto']) }}
				</div>
			</td>
		</tr>
		{% endif %}
		{% endif %}
		{% if dc['idtipo'] == 3 %}
		{% if dc['monto'] %}
		<tr>
			<td >
				{{ dc['formaPago'] }}
			</td>
			<td >
				{{ dc['bono'] }}
			</td>
			<td >
				<div style=" text-align:  right">
					{{ obtenerMonto(dc['monto']) }}
				</div>
			</td>
		</tr>
		{% endif %}
		{% endif %}
		{% endfor %}
		{#ciclo de medios de pago bono#}
	</table>
	<form id="formInfoCaja" method="POST" class="form-horizontal hide" action="{{ path("Caja_Supervisor_ConsolidadoCaja_Imprimir") }}" method="post" target="_blank" >
		<input id ="valoridCaja" type="text" name="valoridCaja"  value=" {{ idcaja }}"><br>
	</form>

	{% block scripts %}
	<link rel="stylesheet" href="{{ asset('bundles/hermes/acev12/css/ui.jqgrid.css') }}"/>
	<link rel="stylesheet" href="{{ asset('bundles/hermes/acev12/css/uncompressed/jqgrid-informes.css') }}"/>
	<script src="{{ asset('bundles/hermes/acev12/js/jqGrid/i18n/grid.locale-es.js') }}" type="text/javascript"></script>
	<script src="{{ asset('bundles/hermes/acev12/js/jqGrid/jquery.jqGrid.min.js') }}" type="text/javascript"></script>
	<script type="text/javascript">
		$('.zoom-pagos').css('zoom', '0.7');
	</script>
	{% endblock %}