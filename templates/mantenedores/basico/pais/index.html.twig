{% extends 'mantenedores/index.html.twig' %}

{% block title %}{{ mantenedor_config.title }}{% endblock %}

{% block mantenedor_content %}
    <div class="mantenedor-pais" 
         data-controller="mantenedores--list mantenedores--modal mantenedores--notification" 
         data-mantenedores--list-entity-value="pais"
         data-mantenedores--list-csrf-token-value="{{ csrf_token }}"
         data-mantenedores--modal-entity-value="pais"
         data-mantenedores--modal-csrf-token-value="{{ csrf_token }}">
        
        <!-- Encabezado -->
        <div class="mantenedor-header">
            <h1>{{ mantenedor_config.title }}</h1>
            <button type="button" 
                    class="btn btn-primary" 
                    data-action="click->mantenedores--modal#openCreate">
                <i class="fas fa-plus"></i> 
                Nuevo {{ mantenedor_config.entity_name }}
            </button>
        </div>

        <!-- Barra de búsqueda -->
        <div class="search-container">
            <div class="input-group">
                <input type="text" 
                       class="form-control" 
                       placeholder="Buscar países..." 
                       data-mantenedores--list-target="searchInput"
                       data-action="input->mantenedores--list#search">
                <button class="btn btn-outline-secondary" 
                        type="button"
                        data-action="click->mantenedores--list#clearSearch">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <!-- Lista de países -->
        <div class="mantenedor-list" data-mantenedores--list-target="container">
            <!-- El contenido se carga dinámicamente -->
        </div>

        <!-- Paginación -->
        <div class="pagination-container" data-mantenedores--list-target="pagination">
            <!-- La paginación se carga dinámicamente -->
        </div>
    </div>

    <!-- Modal para crear/editar -->
    <div class="modal fade" id="paisModal" tabindex="-1" data-mantenedores--modal-target="modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" data-mantenedores--modal-target="title">
                        Nuevo {{ mantenedor_config.entity_name }}
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form data-mantenedores--modal-target="form" data-action="submit->mantenedores--modal#submit">
                        <input type="hidden" data-mantenedores--modal-target="idField">
                        
                        <div class="mb-3">
                            <label for="nombrePais" class="form-label">Nombre del País *</label>
                            <input type="text" 
                                   class="form-control" 
                                   id="nombrePais"
                                   name="nombrePais"
                                   required
                                   data-mantenedores--modal-target="nombrePaisField">
                        </div>
                        
                        <div class="mb-3">
                            <label for="nombreGentilicio" class="form-label">Gentilicio *</label>
                            <input type="text" 
                                   class="form-control" 
                                   id="nombreGentilicio"
                                   name="nombreGentilicio"
                                   required
                                   data-mantenedores--modal-target="nombreGentilicioField">
                        </div>
                        
                        <div class="mb-3 form-check">
                            <input type="checkbox" 
                                   class="form-check-input" 
                                   id="activo"
                                   name="activo"
                                   checked
                                   data-mantenedores--modal-target="activoField">
                            <label class="form-check-label" for="activo">
                                Activo
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        Cancelar
                    </button>
                    <button type="button" 
                            class="btn btn-primary" 
                            data-action="click->mantenedores--modal#submit">
                        <span data-mantenedores--modal-target="submitText">Guardar</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notificaciones -->
    <div data-mantenedores--notification-target="container"></div>
{% endblock %}