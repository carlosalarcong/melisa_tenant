# ============================================
# MELISA MULTI-TENANT - Environment Variables
# ============================================
# Copiar este archivo como .env.local para desarrollo local
# NO commitear .env.local (ya está en .gitignore)

###> symfony/framework-bundle ###
APP_ENV=dev
# Generar con: php -r "echo bin2hex(random_bytes(16));"
APP_SECRET=CHANGE_THIS_TO_RANDOM_SECRET_KEY
###< symfony/framework-bundle ###

###> doctrine/doctrine-bundle ###
# Base de datos CENTRAL (contiene tabla 'tenant' con config de todos los establecimientos)
# Formato: mysql://usuario:password@host:puerto/nombre_base_datos?serverVersion=X.Y
# 
# IMPORTANTE: Esta es la BD que contiene:
# - Tabla 'tenant': Configuración de cada establecimiento (melisalacolina, melisahospital, etc.)
# - Tabla 'member': Usuarios del sistema
#
# Las bases de datos de cada tenant (melisalacolina, melisahospital, etc.) se conectan
# automáticamente via TenantConnectionListener usando la info de la tabla 'tenant'
DATABASE_URL="mysql://melisa:melisamelisa@localhost:3306/melisa_central?serverVersion=8.0.43&charset=utf8mb4"
###< doctrine/doctrine-bundle ###

###> symfony/messenger ###
MESSENGER_TRANSPORT_DSN=doctrine://main?auto_setup=0
###< symfony/messenger ###

###> symfony/mailer ###
# Configuración de correo (null para desarrollo sin envío)
MAILER_DSN=null://null
# Para producción usar SMTP: smtp://user:pass@smtp.example.com:587
###< symfony/mailer ###

###> nelmio/cors-bundle ###
# Permitir CORS desde estos orígenes (desarrollo + producción)
CORS_ALLOW_ORIGIN='^https?://(localhost|127\.0\.0\.1|.*\.melisaupgrade\.prod)(:[0-9]+)?$'
###< nelmio/cors-bundle ###

###> api-platform/medical-api ###
API_PLATFORM_TITLE="Melisa Medical API"
API_PLATFORM_DESCRIPTION="Sistema API REST para gestión médica hospitalaria multi-tenant"
API_PLATFORM_VERSION="1.0.0"
###< api-platform/medical-api ###

# ============================================
# CONFIGURACIÓN ADICIONAL (opcional)
# ============================================

# Nivel de log (debug, info, notice, warning, error, critical, alert, emergency)
# APP_LOG_LEVEL=debug

# Habilitar modo debug (solo desarrollo)
# APP_DEBUG=1

# Zona horaria del sistema
# APP_TIMEZONE=America/Santiago
